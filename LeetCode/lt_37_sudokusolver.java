/*
# 037. Sudoku Solver

## ğŸ§  é¡Œç›®èªªæ˜ï¼š
çµ¦ä¸€å€‹æœªå®Œæˆçš„ 9x9 æ•¸ç¨ç›¤é¢ï¼Œè«‹å¹«å®ƒã€Œå°±åœ°å¡«æ•¸ã€ä½¿å…¶è®Šæˆåˆæ³•æ•¸ç¨ã€‚

### æ•¸ç¨è¦å‰‡ï¼š
1. æ¯è¡Œåªèƒ½å‡ºç¾ä¸€æ¬¡ 1-9
2. æ¯åˆ—åªèƒ½å‡ºç¾ä¸€æ¬¡ 1-9
3. æ¯å€‹ 3x3 çš„å€å¡Šåªèƒ½å‡ºç¾ä¸€æ¬¡ 1-9
4. ç©ºæ ¼ç”¨ '.' è¡¨ç¤º

---

## ğŸ’¡ è§£é¡Œæ€è·¯ï¼ˆBacktracking å›æº¯æ³•ï¼‰

1. å¾å·¦ä¸Šè§’é–‹å§‹æ‰¾ç©ºæ ¼ï¼ˆ'.'ï¼‰
2. å°é€™æ ¼å˜—è©¦å¡«å…¥ 1~9
3. è‹¥è©²æ•¸åˆæ³•ï¼ˆä¸è¡çªï¼‰ï¼Œå°±ç¹¼çºŒå¾€ä¸‹ä¸€æ ¼éè¿´
4. è‹¥ä¹‹å¾Œç„¡è§£ï¼Œå‰‡å›æº¯ï¼ˆBacktrackï¼‰é‚„åŸæˆ '.'ï¼Œå†è©¦ä¸‹ä¸€å€‹æ•¸å­—
5. è‹¥æ•´å¼µç›¤éƒ½å¡«å®Œ â†’ å›å‚³å³å¯ï¼ˆé¡Œç›®ä¿è­‰æœ‰è§£ï¼‰

æ™‚é–“è¤‡é›œåº¦ï¼šO(9^(ç©ºæ ¼æ•¸))  
ç©ºé–“è¤‡é›œåº¦ï¼šO(1)ï¼ˆç›´æ¥ä¿®æ”¹è¼¸å…¥é™£åˆ—ï¼‰

---

## ğŸ§ª ç¯„ä¾‹è¼¸å…¥ï¼ˆå·²çµ¦è§£ï¼‰
[
 ["5","3",".",".","7",".",".",".","."],
 ["6",".",".","1","9","5",".",".","."],
 ["9","8",".",".",".",".",".","6","."],
 ["8",".",".",".","6",".",".",".","3"],
 ["4",".",".","8",".","3",".",".","1"],
 ["7",".",".",".","2",".",".",".","6"],
 [".","6",".",".",".",".","2","8","."],
 [".",".",".","4","1","9",".",".","5"],
 [".",".",".",".","8",".",".","7","9"]
]
*/

public class lt_37_sudokusolver {
    public static void main(String[] args) {
        Solution sol = new Solution();
        char[][] board = {
            {'5','3','.','.','7','.','.','.','.'},
            {'6','.','.','1','9','5','.','.','.'},
            {'9','8','.','.','.','.','.','6','.'},
            {'8','.','.','.','6','.','.','.','3'},
            {'4','.','.','8','.','3','.','.','1'},
            {'7','.','.','.','2','.','.','.','6'},
            {'.','6','.','.','.','.','2','8','.'},
            {'.','.','.','4','1','9','.','.','5'},
            {'.','.','.','.','8','.','.','7','9'}
        };

        sol.solveSudoku(board);

        System.out.println("âœ”ï¸ è§£å‡ºçš„æ•¸ç¨ç›¤å¦‚ä¸‹ï¼š");
        for (char[] row : board) {
            for (char c : row) {
                System.out.print(c + " ");
            }
            System.out.println();
        }
    }
}

class Solution {
    public void solveSudoku(char[][] board) {
        backtrack(board);
    }

    // âœ… å›æº¯ä¸»é‚è¼¯ï¼šå˜—è©¦å¡«æ¯å€‹ç©ºæ ¼
    private boolean backtrack(char[][] board) {
        for (int row = 0; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                // æ‰¾åˆ°ç©ºæ ¼å°±å˜—è©¦å¡«æ•¸
                if (board[row][col] == '.') {
                    for (char c = '1'; c <= '9'; c++) {
                        if (isValid(board, row, col, c)) {
                            board[row][col] = c; // å¡«å…¥
                            if (backtrack(board)) return true; // ç¹¼çºŒéè¿´
                            board[row][col] = '.'; // å›æº¯é‚„åŸ
                        }
                    }
                    return false; // 9 å€‹æ•¸éƒ½è©¦ééƒ½ä¸è¡Œï¼Œé€™å±¤å¤±æ•—
                }
            }
        }
        return true; // æ²’æœ‰ç©ºæ ¼äº†ï¼Œä»£è¡¨è§£å®Œäº†
    }

    // âœ… é©—è­‰å¡«å…¥çš„æ•¸å­—æ˜¯å¦ç¬¦åˆæ•¸ç¨è¦å‰‡
    private boolean isValid(char[][] board, int row, int col, char c) {
        for (int i = 0; i < 9; i++) {
            // åŒä¸€åˆ—
            if (board[row][i] == c) return false;
            // åŒä¸€è¡Œ
            if (board[i][col] == c) return false;
            // åŒä¸€å€‹ 3x3 å€å¡Š
            int boxRow = 3 * (row / 3) + i / 3;
            int boxCol = 3 * (col / 3) + i % 3;
            if (board[boxRow][boxCol] == c) return false;
        }
        return true;
    }
}
